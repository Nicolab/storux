/*! storux v0.5.6 | MIT (c) 2016 Nicolas Tallefourtane - https://github.com/Nicolab/storux */!function(e,a){for(var i in a)e[i]=a[i]}(exports,function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].a;var module=installedModules[moduleId]={a:{},b:moduleId,c:!1};return modules[moduleId].call(module.a,module,module.a,__webpack_require__),module.c=!0,module.a}var installedModules={};return __webpack_require__.d=modules,__webpack_require__.e=installedModules,__webpack_require__.f="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.g=descriptor.g||!1,descriptor.h=!0,"value"in descriptor&&(descriptor.i=!0),Object.defineProperty(target,descriptor.j,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Evemit=__webpack_require__(4),Store=__webpack_require__(2),Scope=__webpack_require__(1),_require=__webpack_require__(3),_isStore=_require.k,getStoreProtoProps=_require.l;if(!WeakMap)throw new Error("WeakMap is not supported by this browser. Please use a polyfill (see the Storux doc).");var Storux=function(){function Storux(){_classCallCheck(this,Storux),this.m={},this.n=new Evemit,this.o=new WeakMap,this.p=new WeakMap}return _createClass(Storux,null,[{j:"isStore",q:function(value){return _isStore(value)}},{j:"mountActionsResolver",q:function(store){var props=getStoreProtoProps(store).concat(Object.keys(store)),notActions=store.scope.s.r,regNotActions=new RegExp(notActions.join("|")),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=props[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).t);_iteratorNormalCompletion=!0){var prop=_step.q;"function"!=typeof store[prop]||store[prop].b||regNotActions.test(prop)||store.scope.mountAction(prop)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator["return"]&&_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError}}}}]),_createClass(Storux,[{j:"beforeAction",q:function(action,listener,thisScope){return this.n.u("beforeAction."+action.v,listener,thisScope),this}},{j:"afterAction",q:function(action,listener,thisScope){return this.n.u("afterAction."+action.v,listener,thisScope),this}},{j:"beforeActions",q:function(listener,thisScope){return this.n.u("beforeActions",listener,thisScope),this}},{j:"afterActions",q:function(listener,thisScope){return this.n.u("afterActions",listener,thisScope),this}},{j:"createStore",q:function(StoruxStore){var opt=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],storeName=void 0,store=void 0;if(opt.w||(opt.w=Storux.w),opt.r||(opt.r=Storux.r.slice()),opt.x=this,store=new StoruxStore(opt),!_isStore(store))throw new TypeError("Storux.createStore() - `store` argument must be an instance of `Store`");if(storeName=store.scope.v,this.m[storeName])throw new Error("The store `"+storeName+"` is already defined in the `Storux` instance.");return Object.defineProperty(this.m,storeName,{g:!0,h:!1,i:!1,q:store}),this.n.y("createStore",this.m[storeName]),this.n.y("createStore."+storeName,this.m[storeName]),Storux.z.forEach(function(prop){store.scope[prop]=void 0}),store.scope.n.y("init"),this.m[storeName]}}]),Storux}();Storux.r=["^on","^handle","^_","^constructor$","^getState$","^getPrevState$","^setState$","^mergeState$"],Storux.z=["generateActions","mountAction","mountActions"],module.a={A:Storux,B:Store,C:Scope,D:Evemit}},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.g=descriptor.g||!1,descriptor.h=!0,"value"in descriptor&&(descriptor.i=!0),Object.defineProperty(target,descriptor.j,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Evemit=__webpack_require__(4),_require=__webpack_require__(3),clone=_require.F,isEquival=_require.G,isStore=_require.k,getStoreProtoProps=_require.l,getFuncName=_require.H,defineDisplayName=_require.I,generateStoreName=_require.J,handlerNameToActionName=_require.K,_privateMap=new WeakMap,Scope=function(){function Scope(_ref){var _this=this,store=_ref.L,opt=_ref.s;_classCallCheck(this,Scope);var _private=void 0;this.x=opt.x,opt.x=null,this.s=opt,this.L=store,this.M=[],this.N=[],this.n=new Evemit,this.O=this.s.O||{},defineDisplayName(this,generateStoreName(this.L)),_private=_privateMap.set(this,{P:null,Q:0,R:{},S:this.O}).get(this),this.n.T("init",function(){_private.S=_this.O})}return _createClass(Scope,[{j:"beforeAction",q:function(action,listener,thisScope){return this.x.n.u("beforeAction."+action.v,listener,thisScope),this}},{j:"afterAction",q:function(action,listener,thisScope){return this.x.n.u("afterAction."+action.v,listener,thisScope),this}},{j:"bindAction",q:function(action,handler){var actionHandlers=void 0,handlerName=getFuncName(handler),actionHandlersMap=this.x.o;if(!this.L[action.v]||this.L[action.v]!==action||!this.L[handlerName]||this.L[handlerName]!==handler)throw new Error(handlerName+" cannot bind the action ("+action.b+') from another store. Use instead the method "store.scope.afterAction()". See the doc.');return actionHandlers=actionHandlersMap.get(action),actionHandlers||(actionHandlers=actionHandlersMap.set(action,[]).get(action)),actionHandlers.push(handler),this}},{j:"bindActions",q:function(list){if(isStore(list))return this.bindStoreActions(list);for(var handlerName in list){var actions=list[handlerName],actionHandler=this[handlerName];if(Array.isArray(actions))for(var i=0,ln=actions.length;ln>i;i++)this.bindAction(actions[i],actionHandler);else this.bindAction(actions,actionHandler)}return this}},{j:"bindStoreActions",q:function(store){var props=getStoreProtoProps(store),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=props[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).t);_iteratorNormalCompletion=!0){var prop=_step.q;if("function"==typeof store[prop]&&0===prop.indexOf("on")){var actionName=handlerNameToActionName(prop),action=store[actionName];action&&this.bindAction(action,store[prop])}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator["return"]&&_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError}}return this}},{j:"bindActionHandler",q:function(actionHandler,listener){var _actionHandlerListenersMap=this.x.p,_actionHandlerListeners=_actionHandlerListenersMap.get(actionHandler);return _actionHandlerListeners||(_actionHandlerListeners=_actionHandlerListenersMap.set(actionHandler,[]).get(actionHandler)),_actionHandlerListeners.push(listener),this}},{j:"generateActions",q:function(){for(var store=this.L,i=0,ln=arguments.length;ln>i;i++){var actionName=arguments[i];if(store[actionName])throw new Error("generateActions(): "+actionName+"is already defined.");store[actionName]=function(dispatch,payload){return dispatch(payload),payload}}return this}},{j:"ensureActions",q:function(){for(var store=this.L,i=0,ln=arguments.length;ln>i;i++){var actionName=arguments[i];store[actionName]||(store[actionName]=function(dispatch,payload){return dispatch(payload),payload})}return this}},{j:"notActions",q:function(actionName){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=arguments[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).t);_iteratorNormalCompletion2=!0){var name=_step2.q;this.s.r.push("^"+name.trim()+"$")}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2["return"]&&_iterator2["return"]()}finally{if(_didIteratorError2)throw _iteratorError2}}return this}},{j:"mountAction",q:function(actionName){var _this2=this,_private=void 0;if(this.L[actionName]&&this.L[actionName].b)return this;_private=_privateMap.get(this);var fn=this.L[actionName],action=function action(){for(var _len=arguments.length,actionArgs=Array(_len),_key=0;_len>_key;_key++)actionArgs[_key]=arguments[_key];return new Promise(function(resolve,reject){_this2.M.push({U:function(){var _this3=this;_private.Q++,_private.P=action.b+"#"+_private.Q,actionArgs=actionArgs.slice(),this.x.n.y("beforeAction."+action.v,actionArgs),this.x.n.y("beforeActions",{V:action.b,W:action.v,X:actionArgs}),actionArgs.unshift(function(payload){return _this3._dispatchAction({Y:action,Z:payload}).then(function(hasChanged){return resolve(fnResult),_private.Q--,_private.P=null,_this3.x.n.y("afterAction."+action.v,payload,fnResult,hasChanged),_this3.x.n.y("afterActions",{V:action.b,W:action.v,$:fnResult,Z:payload,_:hasChanged}),_this3._next(),hasChanged})["catch"](function(err){throw reject(err),err})});var fnResult=fn.apply(this.L,actionArgs)}}),1===_this2.M.length&&_this2._next()})["catch"](function(err){throw err})};return defineDisplayName(action,actionName),action.b=this.v+"."+action.v,action.aa=function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_len2>_key2;_key2++)args[_key2]=arguments[_key2];return setTimeout(action.apply(_this2.L,args),0)},this.L[actionName]=action,this}},{j:"mountActions",q:function(){if(arguments.length){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=arguments[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).t);_iteratorNormalCompletion3=!0){var name=_step3.q;this.mountAction(name)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3["return"]&&_iterator3["return"]()}finally{if(_didIteratorError3)throw _iteratorError3}}}else this.s.w(this.L);return this}},{j:"_next",q:function(){return this.M.length&&!_privateMap.get(this).P?(this.M.shift().U.call(this),!0):!1}},{j:"getHandlerArgs",q:function(_ref2){var action=_ref2.Y,payload=_ref2.Z,nextState=_ref2.ba;return[payload,{V:action.b,W:action.v,ba:nextState}]}},{j:"callActionHandler",q:function(_ref3){var action=_ref3.Y,actionHandler=_ref3.ca,payload=_ref3.Z,nextState=_ref3.ba,nextStateUpdated=actionHandler.apply(this.L,this.getHandlerArgs({Y:action,Z:payload,ba:nextState}));if(!nextStateUpdated||"object"!==("undefined"==typeof nextStateUpdated?"undefined":_typeof(nextStateUpdated)))throw new TypeError('The handler "'+getFuncName(actionHandler)+'" should return the next state for the action '+action.b);return nextStateUpdated}},{j:"reduceActionHandlers",q:function(actionHandlers,action,payload){var nextState=void 0,_actionHandlerListenersMap=this.x.p;nextState=this.getState();for(var i=0,ln=actionHandlers.length;ln>i;i++){var actionHandler=actionHandlers[i],_nextState=this.callActionHandler({Y:action,ca:actionHandler,Z:payload,ba:nextState});if(_nextState&&"object"===("undefined"==typeof _nextState?"undefined":_typeof(_nextState))){var listeners=_actionHandlerListenersMap.get(actionHandler);if(nextState=_nextState,listeners&&listeners.length)for(var _i=0,_ln=listeners.length;_ln>_i;_i++)listeners[_i].apply(null,this.getHandlerArgs({Y:action,Z:payload,ba:nextState}))}}return this.setState(nextState)}},{j:"_dispatchAction",q:function(_ref4){var action=_ref4.Y,payload=_ref4.Z,actionHandlers=this.x.o.get(action);return actionHandlers&&actionHandlers.length?Promise.resolve(this.reduceActionHandlers(actionHandlers,action,payload)):Promise.resolve(!1)}},{j:"listen",q:function(listener){var _this4=this;return this.N.push(listener),this.n.y("listen",listener),function(){return _this4.unlisten(listener)}}},{j:"unlisten",q:function(listener){var changeListeners=this.N,i=changeListeners.indexOf(listener);return-1===i?!1:(changeListeners.splice(i,1),this.n.y("unlisten",listener),!0)}},{j:"getState",q:function(){return clone({},_privateMap.get(this).S)}},{j:"getPrevState",q:function(){return clone({},_privateMap.get(this).R)}},{j:"setState",q:function(){var nextState=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],changeListeners=this.N,ln=changeListeners.length,_private=_privateMap.get(this);if(isEquival(_private.S,nextState))return!1;if(_private.R=_private.S,_private.S=clone({},nextState),ln)for(var i=0;ln>i;i++)changeListeners[i](this);return!0}},{j:"mergeState",q:function(obj){return this.setState(_extends({},_privateMap.get(this).S,obj))}},{j:"resetState",q:function(){var hasChanged=this.setState(this.O);return hasChanged&&this.n.y("resetState"),hasChanged}},{j:"recycle",q:function(){var hasChanged=this.setState(this.O);return _privateMap.get(this).R={},this.n.y("init",hasChanged),hasChanged}}]),Scope}();module.a=Scope},function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Scope=__webpack_require__(1),Store=function Store(){var opt=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,Store);var scope=new Scope({L:this,s:opt});Object.defineProperty(this,"scope",{g:!0,h:!1,i:!1,q:scope}),Object.defineProperty(this,"getState",{g:!1,h:!1,i:!1,q:scope.getState.bind(scope)}),Object.defineProperty(this,"setState",{g:!1,h:!1,i:!1,q:scope.setState.bind(scope)}),Object.defineProperty(this,"mergeState",{g:!1,h:!1,i:!1,q:scope.mergeState.bind(scope)}),Object.defineProperty(this,"getPrevState",{g:!1,h:!1,i:!1,q:scope.getPrevState.bind(scope)})};module.a=Store},function(module,exports,__webpack_require__){"use strict";var Store=void 0,utils={F:function(target){for(var _len=arguments.length,sources=Array(_len>1?_len-1:0),_key=1;_len>_key;_key++)sources[_key-1]=arguments[_key];return sources.forEach(function(source){var descriptors=Object.keys(source).reduce(function(descriptors,key){return descriptors[key]=Object.getOwnPropertyDescriptor(source,key),descriptors},{});Object.getOwnPropertySymbols(source).forEach(function(sym){var descriptor=Object.getOwnPropertyDescriptor(source,sym);descriptor.g&&(descriptors[sym]=descriptor)}),Object.defineProperties(target,descriptors)}),target},G:function(a,b){var aProps=Object.getOwnPropertyNames(a),bProps=Object.getOwnPropertyNames(b),aPropsLn=aProps.length,bPropsLn=bProps.length;if(aPropsLn!==bPropsLn)return!1;for(var i=0;aPropsLn>i;i++){var propName=aProps[i];if(a[propName]!==b[propName])return!1}return!0},da:function(str){return str.charAt(0).toUpperCase()+str.substr(1)},ea:function(str){return str.charAt(0).toLowerCase()+str.substr(1)},K:function(str){return utils.ea(str.substring(2))},J:function(store){return utils.ea(store.constructor.name)},H:function(fn){return fn.name||/^function\s+([\w\$]+)\s*\(/.exec(fn.toString())[1]},I:function(obj,displayName){Object.defineProperty(obj,"displayName",{g:!0,h:!1,i:!1,q:displayName})},k:function(value){return Store||(Store=__webpack_require__(2)),!0==value instanceof Store},fa:function(obj){var endProto=arguments.length<=1||void 0===arguments[1]?Object:arguments[1],props=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];return obj===endProto?props:utils.fa(obj.__proto__,endProto,props.concat(Object.getOwnPropertyNames(obj.prototype).filter(function(prop){return-1===props.indexOf(prop)})))},l:function(store){return utils.fa(utils.k(store)?store.constructor:store,Store)}};module.a=utils},function(module,exports){!function(){"use strict";function Evemit(){this.ga={}}Evemit.prototype.u=function(event,fn,context){return this.ga[event]||(this.ga[event]=[]),context&&(fn.ha=context),this.ga[event].push(fn),this},Evemit.prototype.T=function(event,fn,context){return fn.ia=!0,this.u(event,fn,context)},Evemit.prototype.y=function(event,arg1,arg2,arg3,arg4){var fn,evs,args,aLn;if(!this.ga[event])return!1;args=Array.prototype.slice.call(arguments,1),aLn=args.length,evs=this.ga[event];for(var i=0,ln=evs.length;ln>i;i++)switch(fn=evs[i],fn.ia&&this.ja(event,fn),aLn){case 0:fn.call(fn.ha);break;case 1:fn.call(fn.ha,arg1);break;case 2:fn.call(fn.ha,arg1,arg2);break;case 3:fn.call(fn.ha,arg1,arg2,arg3);break;case 4:fn.call(fn.ha,arg1,arg2,arg3,arg4);break;default:fn.apply(fn.ha,args)}return!0},Evemit.prototype.ja=function(event,fn){if(!this.ga[event])return this;for(var i=0,ln=this.ga[event].length;ln>i;i++)this.ga[event][i]===fn&&(this.ga[event][i]=null,delete this.ga[event][i]);return this.ga[event]=this.ga[event].filter(function(ltns){return"undefined"!=typeof ltns}),this},Evemit.prototype.ka=function(event){var evs,ltns;if(event)return this.ga[event]||[];evs=this.ga,ltns=[];for(var ev in evs)ltns=ltns.concat(evs[ev].valueOf());return ltns},"undefined"!=typeof module&&module.a?module.a=Evemit:window.D=Evemit}()}]));