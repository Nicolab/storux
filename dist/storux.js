/*! storux v0.10.0 | MIT (c) 2019 Nicolas Tallefourtane - https://github.com/Nicolab/storux */
parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Q5O8":[function(require,module,exports) {
!function(){"use strict";function t(){this.events={}}t.prototype.on=function(t,e,n){return this.events[t]||(this.events[t]=[]),n&&(e._E_ctx=n),this.events[t].push(e),this},t.prototype.once=function(t,e,n){return e._E_once=!0,this.on(t,e,n)},t.prototype.emit=function(t,e,n,s,r){var i,o,c,l;if(!this.events[t])return!1;l=(c=Array.prototype.slice.call(arguments,1)).length;for(var a=0,u=(o=this.events[t]).length;a<u;a++)switch((i=o[a])._E_once&&this.off(t,i),l){case 0:i.call(i._E_ctx);break;case 1:i.call(i._E_ctx,e);break;case 2:i.call(i._E_ctx,e,n);break;case 3:i.call(i._E_ctx,e,n,s);break;case 4:i.call(i._E_ctx,e,n,s,r);break;default:i.apply(i._E_ctx,c)}return!0},t.prototype.off=function(t,e){if(!this.events[t])return this;for(var n=0,s=this.events[t].length;n<s;n++)this.events[t][n]===e&&(this.events[t][n]=null,delete this.events[t][n]);return this.events[t]=this.events[t].filter(function(t){return void 0!==t}),this},t.prototype.listeners=function(t){var e,n;if(t)return this.events[t]||[];for(var s in n=[],e=this.events)n=n.concat(e[s].valueOf());return n},"undefined"!=typeof module&&module.exports?module.exports=t:window.Evemit=t}();
},{}],"FOZT":[function(require,module,exports) {
var e,t={clone:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach(function(t){var r=Object.keys(t).reduce(function(e,r){return e[r]=Object.getOwnPropertyDescriptor(t,r),e},{});Object.getOwnPropertySymbols(t).forEach(function(e){var n=Object.getOwnPropertyDescriptor(t,e);n.enumerable&&(r[e]=n)}),Object.defineProperties(e,r)}),e},isEquival:function(e,t){var r=Object.getOwnPropertyNames(e),n=Object.getOwnPropertyNames(t),o=r.length;if(o!==n.length)return!1;for(var i=0;i<o;i++){var c=r[i];if(e[c]!==t[c])return!1}return!0},ucFirst:function(e){return e.charAt(0).toUpperCase()+e.substr(1)},lcFirst:function(e){return e.charAt(0).toLowerCase()+e.substr(1)},generateStoreName:function(e){return t.lcFirst(e.displayName||t.getFuncName(e.constructor))},getActionId:function(e,t){return"string"==typeof t?e.displayName+"."+t:t.id},toId:function(e){return"string"==typeof e?e:e.id},getFuncName:function(e){var t=e.displayName||e.name;return t||((t=/^function\s+([\w$]+)\s*\(/.exec(e.toString()))?t[1]:null)},defineDisplayName:function(e,t){Object.defineProperty(e,"displayName",{enumerable:!0,configurable:!1,writable:!1,value:t})},isStore:function(t){return e||(e=require("./Store")),t instanceof e==!0},getProtoProps:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e===r?n:t.getProtoProps(e.__proto__,r,n.concat(Object.getOwnPropertyNames(e.prototype).filter(function(e){return-1===n.indexOf(e)})))}};module.exports=t;
},{"./Store":"MwYS"}],"taJT":[function(require,module,exports) {
function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function i(t){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?e(r,!0).forEach(function(e){n(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}var a=require("evemit"),c=require("./utils"),h=c.clone,u=c.isEquival,l=c.getFuncName,p=c.defineDisplayName,f=c.generateStoreName;function y(){throw new ReferenceError("No action in progress")}var d=function(){function e(t){var i=this,n=t.store,o=t.opt;r(this,e),this.storux=o.storux,o.storux=null,this.opt=o,this.store=n,this.initialState=this.opt.initialState?h({},this.opt.initialState):{},this.clone=h,this.dispatch=y,this._lc=new a,this.on=this._lc.on.bind(this._lc),this.once=this._lc.once.bind(this._lc),this.off=this._lc.off.bind(this._lc),this.emit=this._lc.emit.bind(this._lc),this.listeners=this._lc.listeners.bind(this._lc),p(this,f(this.store)),this._p={aq:[],ca:null,cl:[]},this.on("init",function(){i.dispatch=y,i._p.ca=null,i._p.state=h({},i.initialState)})}return s(e,[{key:"listen",value:function(t){var e=this;if("function"!=typeof t)throw new TypeError(this.displayName+": listener must be a function.");return this._p.cl.push(t),this.emit("listen",t),function(){return e.unlisten(t)}}},{key:"unlisten",value:function(t){var e=this._p.cl,i=e.indexOf(t);return-1!==i&&(e.splice(i,1),this.emit("unlisten",t),!0)}},{key:"getState",value:function(){return h({},this._p.state)}},{key:"replaceState",value:function(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(u(this._p.state,i))return!1;if(this._p.state=h({},i),t=this._p.cl.length){e=this._p.cl;for(var n=0;n<t;n++)"function"==typeof e[n]?e[n](this.store):e.splice(n,1)}return!0}},{key:"setState",value:function(t){return this.replaceState(i({},this._p.state,{},t))}},{key:"resetState",value:function(){var t=this.replaceState(this.initialState);return t&&this.emit("resetState"),t}},{key:"recycle",value:function(){var t=this.replaceState(this.initialState);return this.emit("init",t),t}},{key:"save",value:function(e,i){if(!this.dispatch._action||!this._p.ca)throw new ReferenceError("No action in progress.");if(this.dispatch._action.hooks.length)throw new TypeError("This action have one or more hooks. Use dispatch() instead save().");if("object"!==t(e))throw new TypeError("save() require an object in "+this.dispatch._action.id);return this.dispatch(i,e)}},{key:"_dispatcher",value:function(t){var e,i=t.resolve,n=t.action,r=t.payload,o=t.obj,s=t.fnResult;if(this.dispatch._inProgress)throw new Error("Dispatching in progress: "+n.id+" The dispatcher must be called only once by action.");return this.dispatch._inProgress=!0,e=n.hooks.length?this._reduceActionHooks(n,r):!!o&&this.setState(o),this.dispatch=y,i(s),this.storux.emit("after."+n.id,r,s,e),this.storux.emit("after",{actionId:n.id,actionName:n.displayName,result:s,payload:r,hasChanged:e}),this._p.ca=null,this._next(),e}},{key:"_next",value:function(){return!(!this._p.aq.length||this.dispatch._action||this._p.ca)&&(this._p.aq.shift()(),!0)}},{key:"_createActionProxy",value:function(t){var e=this;return function i(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return new Promise(function(n){var o=e;e._p.aq.push(function(){if(o.dispatch._action||o._p.ca)throw new Error(i.id+" can be called, because the action "+o.dispatch._action.id+" is not finished");o.dispatch=function(t,r){return new Promise(function(s){setImmediate(function(){s(o._dispatcher({resolve:n,action:i,payload:t,obj:r,fnResult:e}))})})},o.dispatch._action=i,o._p.ca=i.id,r=r.slice(),o.storux.emit("before."+i.id,r),o.storux.emit("before",{actionId:i.id,actionName:i.displayName,actionArgs:r});var e=t.apply(o.store,r)}),1===e._p.aq.length&&e._next()})}}},{key:"_getHandlerArgs",value:function(t){var e=t.action,i=t.payload;return[t.nextState,i,{actionId:e.id,actionName:e.displayName}]}},{key:"_reduceActionHooks",value:function(e,i){for(var n=this.getState(),r=0,o=e.hooks.length;r<o;r++){var s=e.hooks[r];if("function"!=typeof s)throw new TypeError("The hook must be a function. Hook type: "+t(s));var a=s.apply(this.store,this._getHandlerArgs({action:e,payload:i,nextState:n}));if(!a||"object"!==t(a))throw new TypeError('The hook "'+l(s)+'" should return the next state for the action '+e.id);n=a}return this.replaceState(n)}},{key:"mountAction",value:function(t,e){var i=this;if(this.store[t]&&this.store[t].id)return this;var n=this._createActionProxy(e);p(n,t);var r=l(e);return r&&"function"==typeof this.store[r]&&(this.store[r]=void 0),n.id=this.displayName+"."+n.displayName,n.defer=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return setImmediate(n.apply(i.store,e))},n.hooks=[],this.store[t]=n,this}},{key:"mountActions",value:function(e){if("object"!==t(e))throw new ReferenceError("mountActions() requiere one or more actions to mount");for(var i in e)this.mountAction(i,e[i]);return this}},{key:"ensureActions",value:function(){return this._generateActions("dispatch",arguments)}},{key:"ensureSaveActions",value:function(){return this._generateActions("save",arguments)}},{key:"_generateActions",value:function(t,e){for(var i=this.store,n=0,r=e.length;n<r;n++){var o=e[n];i[o]||(i[o]=function(e){return"save"===t?i.scope.save(e,e):i.scope.dispatch(e),e},this.mountAction(o,i[o]))}return this}}]),e}();module.exports=d,module.exports.default=d;
},{"evemit":"Q5O8","./utils":"FOZT"}],"MwYS":[function(require,module,exports) {
function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}var o=require("./Scope"),i=function(e,t,n,o){Object.defineProperty(t,o||n,{enumerable:!1,configurable:!1,writable:!1,value:e[n].bind(e)})},r=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t);var o=new t.Scope({store:this,opt:n});Object.defineProperty(this,"scope",{enumerable:!0,configurable:!1,writable:!1,value:o}),i(o,this,"getState"),i(o,this,"setState"),i(o,this,"replaceState"),this._mount()}return n(t,[{key:"_dispatch",value:function(e,t){return this.scope.dispatch(e,t)}},{key:"_save",value:function(e,t){return this.scope.save(e,t)}},{key:"_mount",value:function(){var e=[];for(var t in this._mount){var n=this._mount[t];"action"!==n.type?"hook"===n.type&&e.push(n):this.scope.mountAction(n.name,n.fn)}for(var o=0,i=e.length;o<i;o++)this[e[o].actionName].hooks.push(this[e[o].key]);this._mount=void 0}}]),t}();r.Scope=o,module.exports=r,module.exports.default=r;
},{"./Scope":"taJT"}],"Focm":[function(require,module,exports) {
function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}var o=require("evemit"),n=require("./Store"),i=require("./Scope"),s=require("./utils"),f=s.isStore,c=s.toId,u=function(){function t(){e(this,t),this.stores={},this.Store=t.Store,this._lc=new o,this.on=this._lc.on.bind(this._lc),this.once=this._lc.once.bind(this._lc),this.off=this._lc.off.bind(this._lc),this.emit=this._lc.emit.bind(this._lc),this.listeners=this._lc.listeners.bind(this._lc)}return r(t,[{key:"create",value:function(e){var r,o,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.storux=this,o=new e(n),!f(o))throw new TypeError("Storux.create() - `store` argument must be an instance of `Store`");if(r=o.scope.displayName,this.stores[r])throw new Error("The store `"+r+"` is already defined in the `Storux` instance.");return Object.defineProperty(this.stores,r,{enumerable:!0,configurable:!1,writable:!1,value:o}),this.emit("create",this.stores[r]),this.emit("create."+r,this.stores[r]),t.removeScopePropsAfterCreation.forEach(function(e){o.scope[e]=void 0}),o.scope.emit("init"),this.stores[r]}},{key:"before",value:function(e,t,r){return this.on("before."+c(e),t,r),this}},{key:"offBefore",value:function(e,t){return this.off("before."+c(e),t),this}},{key:"after",value:function(e,t,r){return this.on("after."+c(e),t,r),this}},{key:"offAfter",value:function(e,t){return this.off("after."+c(e),t),this}},{key:"beforeEach",value:function(e,t){return this.on("before",e,t),this}},{key:"offBeforeEach",value:function(e){return this.off("before",e),this}},{key:"afterEach",value:function(e,t){return this.on("after",e,t),this}},{key:"offAfterEach",value:function(e){return this.off("after",e),this}}]),t}();u.Store=n,u.isStore=f,u.removeScopePropsAfterCreation=["_createActionProxy","_generateActions","ensureActions","ensureSaveActions","mountAction","mountActions"],module.exports={Storux:u,Store:n,Scope:i,action:function(e){return function(t,r){t._mount[r]={type:"action",name:e,fn:t[r]}}},hook:function(e){return function(t,r){t._mount[r]={type:"hook",key:r,actionName:e}}}};
},{"evemit":"Q5O8","./Store":"MwYS","./Scope":"taJT","./utils":"FOZT"}]},{},["Focm"], null)
//# sourceMappingURL=/storux.js.map
